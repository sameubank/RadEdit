tracer = require 'tracer'
colors = require 'colors'

colorConsole = tracer.colorConsole(
	filters:
		log: colors.default
		trace: colors.cyan
		debug: colors.magenta
		info: colors.green
		warn: [colors.yellow, colors.bold]
		error: [colors.red, colors.bold]
	format: "{{timestamp}} {{title}} {{message}}"
	errorFormat: "{{timestamp}} {{title}} {{file}}:{{line}} - {{message}}{{stack}}"
	preprocess: (data) ->
		if data.stack and data.title is 'error'
			data.stack = '\n' + data.stack.join '\n'
		else
			data.stack = ''
		data.title = data.title.toUpperCase() + ':'
		data.title += "  ".substr 0, 5 - data.title.length
	dateformat: "hh:MM:ss" # "m/d/yy H:MM:ss"
)


global.log = colorConsole.log
for key of colorConsole
	log[key] = colorConsole[key]


process.on "uncaughtException", (err) ->
	
	log.error err